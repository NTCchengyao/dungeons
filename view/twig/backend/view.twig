{% extends 'backend/content-wrapper.twig' %}

{% set breadcrumbs, data, description, formId, title = result.breadcrumbs, result.data, result.sub_title, random(), controller.menu().title %}

{% block header %}
    {% include 'backend/header.twig' %}
{% endblock %}

{% block content %}
    <div class="card card-tabs">
        <div class="card-body form-wrapper" id="_{{ formId }}">
            {% for style in result.styles %}
                {% if style.type == 'hidden' %}
                    {% include 'backend/component/hidden.twig' with {'data': data, 'style': style} only %}
                {% else %}
                    <div class="form-group">
                        <label>
                            {% if style.required %}
                                <span class="text-danger">*</span>
                            {% endif %}
                            {{ style.label }}
                        </label>
                        <span class="invalid-feedback" data-name="{{ style.name }}"></span>
                        {% include 'backend/component/' ~ style.type ~ '.twig' with {'class': 'form-control', 'data': data, 'style': style} only %}
                        <span class="text-secondary text-xs">{{ style.remark }}</span>
                    </div>
                {% endif %}
            {% endfor %}
        </div>
        {% if result.buttons %}
            <div class="card-footer">
            {% for button in result.buttons %}
                {% if button.method == 'cancel' %}
                    <button class="btn {{ button.class }}" data-backward>{{ button.label }}</button>
                {% else %}
                    <button class="btn {{ button.class }}" data-ajax="{{ result.path }}/{{ button.method }}{% if data.id %}/{{ data.id }}{% endif %}" data-form="#_{{ formId }}">{{ button.label }}</button>
                {% endif %}
            {% endfor %}
            </div>
        {% endif %}
    </div>
{% endblock %}

{% block postprocess %}
    {{ parent() }}

    initForm($("#_{{ formId }}"));
{% endblock %}
